{"name": "Deploy to Vercel", "on": {"workflow_dispatch": {}, "push": {"branches": ["main"]}, "pull_request": {"branches": ["main"]}}, "jobs": {"build_and_deploy": {"runs-on": "ubuntu-latest", "steps": [{"uses": "actions/checkout@v4", "name": "Checkout"}, {"uses": "actions/setup-node@v4", "name": "Setup Node.js", "with": {"node-version": "20", "cache": "npm"}}, {"name": "Install dependencies", "run": "npm ci"}, {"name": "Generate Prisma Client", "run": "npx prisma generate", "env": {"DATABASE_URL": "${{ secrets.DATABASE_URL }}"}, "shell": "bash"}, {"name": "Build application", "run": "npm run build", "env": {"DATABASE_URL": "${{ secrets.DATABASE_URL }}", "NEXTAUTH_URL": "${{ secrets.NEXTAUTH_URL }}", "NEXTAUTH_SECRET": "${{ secrets.NEXTAUTH_SECRET }}", "NODE_ENV": "production"}, "shell": "bash"}]}}}