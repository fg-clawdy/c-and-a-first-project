{"# \ud83d\uddbc\ufe0f Vercel Deployment Guide - Shared Notepad App\n\nComplete automated deployment to Vercel with GitHub Secrets.\n\n---\n\n## \ud83d\udccb Prerequisites\n\n1. GitHub repository with your code\n2. Vercel account (free tier works)\n3. PostgreSQL database (Vercel Postgres or external)\n\n---\n\n## \ud83d\udd27 Step 1: Set GitHub Secrets\n\nGo to your GitHub repository: Settings \u2192 Secrets and variables \u2192 Actions \u2192 New repository secret\n\nAdd these 4 secrets:\n\n| Secret Name | Description | How to Get |\n|-------------|-------------|------------|\n| `DATABASE_URL` | PostgreSQL connection string | Vercel Postgres or your provider |\n| `NEXTAUTH_URL` | Your app's URL | After Vercel deploy (e.g., `https://your-app.vercel.app`) |\n| `NEXTAUTH_SECRET` | Secret for sessions | Run `openssl rand -base64 32` |\n| `NODE_ENV` | Environment | Set to `production` |\n\n### Generating NEXTAUTH_SECRET\n\n```bash\nopenssl rand -base64 32\n```\n\nCopy the output and set as the `NEXTAUTH_SECRET`.\n\n---\n\n## \ud83d\uddcc Step 2: Set Up Database\n\n### Option A: Vercel Postgres (Recommended)\n\n1. Go to [vercel.com](https://vercel.com) and open your project\n2. Go to **Storage** \u2192 **Postgres**\n3. Click **Create Database**\n4. Vercel will provide the `DATABASE_URL`\n5. Add this URL to your GitHub Secrets\n\n### Option B: External PostgreSQL\n\nIf you use Neon, Supabase, Railway, or any other PostgreSQL provider:\n\n```\nDATABASE_URL=postgresql://username:password@hostname:5432/database_name\n```\n\nAdd this to your GitHub Secrets.\n\n---\n\n## \ud83d\udd04 Step 3: Deploy to Vercel\n\n### Method A: Vercel GitHub Integration (Recommended)\n\n1. Go to [vercel.com/new](https://vercel.com/new)\n2. Click **Add GitHub Organization/Account**\n3. Select your repository\n4. Vercel will automatically detect Next.js\n5. Configure:\n   - **Project Name**: `shared-notepad-app` (or your choice)\n   - **Framework Preset**: Next.js\n   - **Root Directory**: `./`\n6. Click **Deploy**\n\nAfter deployment succeeds:\n1. Copy your Vercel URL (e.g., `https://shared-notepad-app.vercel.app`)\n2. Set it as `NEXTAUTH_URL` in GitHub Secrets\n3. Trigger another deployment to apply the environment variables\n\n### Method B: Vercel CLI\n\n```bash\nnpm install -g vercel\nvercel login\nvercel\n``\n\nFollow the prompts to connect your GitHub repository.\n\n---\n\n## \ud83c\udf1f Step 4: Automation\n\nThis project is configured with:\n\n- **Vercel integration**: Automatic builds on every push to `main`\n- **GitHub Actions**: Runs `npm run build` on every PR\n- **Prisma**: Automatically generates client on build\n- **Environment Variables**: Pulled from GitHub Secrets\n\n### What Happens on Deploy\n\n1. Vercel detects Next.js framework\n2. Reads provided `vercel.json` configuration\n3. Pulls environment variables from GitHub Secrets\n4. Runs `npm install` for dependencies\n5. Generates Prisma client with your database connection\n6. Runs `npm run build`\n7. Deploys to Vercel CDN\n\n---\n\n## \ud83e\udd14 Testing the Deployment\n\nAfter deployment:\n\n1. Visit your Vercel URL\n2. Try registering a new user\n3. Create a post\n4. Check database has the data\n\n### Common Issues\n\n**\"Database connection failed\"**: Check `DATABASE_URL` in GitHub Secrets\n\n**\"Auth not working\"**: Verify `NEXTAUTH_URL` matches your deployed URL exactly\n\n**\"Prisma client not generated\"**: Should happen automatically on build\n\n---\n\n## \ud83d\udcbb Local Development\n\nSet up local environment:\n\n```bash\n# Copy example env file\ncp .env.example .env.local\n\n# Edit with local settings\nnano .env.local\n```\n\nFor local SQLite (included):\n```\nDATABASE_URL=file:./prisma/dev.db\nNEXTAUTH_URL=http://localhost:3000\nNEXTAUTH_SECRET=local-dev-secret\n```\n\nThen run:\n```bash\nnpm install\nnpx prisma migrate dev --name init\nnpm run dev\n```\n\n---\n\n## \ud83d\udcd9 Database Schema\n\nThe app uses these tables:\n\n- **users**: User accounts with authentication\n- **posts**: User posts with timestamps\n- **rate_limits**: Rate limiting per user\n\nSee `prisma/schema.prisma` for full definitions.\n\n---\n\n## \ud83d\udd12 Security Configuration\n\nThis deployment includes:\n\n- \u2705 Database secrets via GitHub Secrets (not hardcoded)\n- \u2705 Auth secrets via GitHub Secrets\n- \u2705 Production environment flag\n- \u2705 Passwords hashed with bcrypt\n- \u2705 Rate limiting on all endpoints\n- \u2705 HTTPS on Vercel (automatic)\n- \u2705 NextAuth.js session security\n\n---\n\n## \ud83d\udc40 Monitoring\n\nVercel provides:\n- Real-time logs\n- Analytics\n- Error tracking\n- Performance metrics\n\nAccess via your Vercel dashboard.\n\n---\n\n## \ud83d\udcc4 Support\n\nFor Vercel-specific issues:\n- [Vercel Docs](https://vercel.com/docs)\n- [Next.js Deployment](https://nextjs.org/docs/deployment)\n\nFor app issues:\n- Check the `DELOYMENT.md` for troubleshooting steps\n- Review logs in Vercel dashboard\n\n---\n\n**Status**: Ready for automated deployment \u2705"}